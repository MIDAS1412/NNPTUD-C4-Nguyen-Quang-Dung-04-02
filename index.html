<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Dashboard - Quản lý sản phẩm</title>
    <meta name="description" content="Dashboard quản lý sản phẩm với đầy đủ tính năng CRUD">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-gradient-primary sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="bi bi-box-seam me-2 fs-4"></i>
                <span class="fw-bold">Product Dashboard</span>
            </a>
            <div class="d-flex align-items-center">
                <span class="badge bg-light text-dark me-3">
                    <i class="bi bi-database me-1"></i>
                    <span id="totalProducts">0</span> Sản phẩm
                </span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid py-4">
        <!-- Controls Section -->
        <div class="card control-card mb-4">
            <div class="card-body">
                <div class="row g-3 align-items-center">
                    <!-- Search -->
                    <div class="col-md-4">
                        <div class="input-group input-group-lg search-input">
                            <span class="input-group-text border-0 bg-transparent">
                                <i class="bi bi-search text-muted"></i>
                            </span>
                            <input type="text" class="form-control border-0" id="searchInput" 
                                   placeholder="Tìm kiếm theo tiêu đề..." autocomplete="off">
                            <button class="btn btn-light border-0" type="button" id="clearSearch" style="display: none;">
                                <i class="bi bi-x-lg"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Items per page -->
                    <div class="col-md-2">
                        <select class="form-select form-select-lg" id="itemsPerPage">
                            <option value="5">5 / trang</option>
                            <option value="10" selected>10 / trang</option>
                            <option value="20">20 / trang</option>
                        </select>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="col-md-6 text-end">
                        <button class="btn btn-outline-success btn-lg me-2" id="exportCSV">
                            <i class="bi bi-download me-2"></i>Export CSV
                        </button>
                        <button class="btn btn-primary btn-lg btn-glow" data-bs-toggle="modal" data-bs-target="#createModal">
                            <i class="bi bi-plus-lg me-2"></i>Thêm sản phẩm
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="text-center py-5">
            <div class="spinner-grow text-primary" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-muted">Đang tải dữ liệu...</p>
        </div>

        <!-- Products Table -->
        <div class="card table-card" id="tableContainer" style="display: none;">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0" id="productsTable">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="id">
                                    ID <i class="bi bi-arrow-down-up sort-icon"></i>
                                </th>
                                <th>Hình ảnh</th>
                                <th class="sortable" data-sort="title">
                                    Tiêu đề <i class="bi bi-arrow-down-up sort-icon"></i>
                                </th>
                                <th class="sortable" data-sort="price">
                                    Giá <i class="bi bi-arrow-down-up sort-icon"></i>
                                </th>
                                <th>Danh mục</th>
                                <th class="text-center">Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="productsBody">
                            <!-- Products will be rendered here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        <div class="d-flex justify-content-between align-items-center mt-4" id="paginationContainer" style="display: none !important;">
            <div class="text-muted">
                Hiển thị <span id="showingFrom">0</span> - <span id="showingTo">0</span> 
                trong số <span id="showingTotal">0</span> sản phẩm
            </div>
            <nav>
                <ul class="pagination pagination-lg mb-0" id="pagination">
                    <!-- Pagination will be rendered here -->
                </ul>
            </nav>
        </div>
    </div>

    <!-- Detail/Edit Modal -->
    <div class="modal fade" id="detailModal" tabindex="-1" aria-labelledby="detailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="detailModalLabel">
                        <i class="bi bi-box-seam me-2"></i>Chi tiết sản phẩm
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-5">
                            <div id="detailImageCarousel" class="carousel slide" data-bs-ride="false">
                                <div class="carousel-inner rounded-3" id="detailImages">
                                    <!-- Images will be rendered here -->
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#detailImageCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#detailImageCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <form id="editForm">
                                <input type="hidden" id="editId">
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Tiêu đề</label>
                                    <input type="text" class="form-control form-control-lg" id="editTitle" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Giá ($)</label>
                                    <input type="number" class="form-control form-control-lg" id="editPrice" required min="0">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Mô tả</label>
                                    <textarea class="form-control" id="editDescription" rows="4" required></textarea>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">URL Hình ảnh</label>
                                    <input type="url" class="form-control" id="editImages" placeholder="https://example.com/image.jpg">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-semibold">Danh mục</label>
                                    <select class="form-select form-select-lg" id="editCategory" required>
                                        <option value="1">Clothes</option>
                                        <option value="2">Electronics</option>
                                        <option value="3">Furniture</option>
                                        <option value="4">Shoes</option>
                                        <option value="5">Miscellaneous</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-secondary btn-lg" data-bs-dismiss="modal">
                        <i class="bi bi-x-lg me-2"></i>Đóng
                    </button>
                    <button type="button" class="btn btn-primary btn-lg btn-glow" id="saveEditBtn">
                        <i class="bi bi-check-lg me-2"></i>Lưu thay đổi
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Modal -->
    <div class="modal fade" id="createModal" tabindex="-1" aria-labelledby="createModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0 bg-gradient-primary text-white">
                    <h5 class="modal-title" id="createModalLabel">
                        <i class="bi bi-plus-circle me-2"></i>Thêm sản phẩm mới
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createForm">
                        <div class="mb-3">
                            <label class="form-label fw-semibold">
                                <i class="bi bi-tag me-1"></i>Tiêu đề <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control form-control-lg" id="createTitle" required 
                                   placeholder="Nhập tên sản phẩm">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-semibold">
                                <i class="bi bi-currency-dollar me-1"></i>Giá ($) <span class="text-danger">*</span>
                            </label>
                            <input type="number" class="form-control form-control-lg" id="createPrice" required min="0" 
                                   placeholder="0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-semibold">
                                <i class="bi bi-text-paragraph me-1"></i>Mô tả <span class="text-danger">*</span>
                            </label>
                            <textarea class="form-control" id="createDescription" rows="3" required
                                      placeholder="Mô tả chi tiết sản phẩm"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-semibold">
                                <i class="bi bi-image me-1"></i>URL Hình ảnh <span class="text-danger">*</span>
                            </label>
                            <input type="url" class="form-control" id="createImages" required
                                   placeholder="https://example.com/image.jpg">
                            <div class="form-text">Nhập đường dẫn URL của hình ảnh sản phẩm</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-semibold">
                                <i class="bi bi-folder me-1"></i>Danh mục <span class="text-danger">*</span>
                            </label>
                            <select class="form-select form-select-lg" id="createCategory" required>
                                <option value="">-- Chọn danh mục --</option>
                                <option value="1">Clothes</option>
                                <option value="2">Electronics</option>
                                <option value="3">Furniture</option>
                                <option value="4">Shoes</option>
                                <option value="5">Miscellaneous</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-secondary btn-lg" data-bs-dismiss="modal">
                        <i class="bi bi-x-lg me-2"></i>Hủy
                    </button>
                    <button type="button" class="btn btn-success btn-lg btn-glow" id="createProductBtn">
                        <i class="bi bi-plus-lg me-2"></i>Tạo sản phẩm
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="notificationToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <i class="bi bi-check-circle-fill text-success me-2" id="toastIcon"></i>
                <strong class="me-auto" id="toastTitle">Thông báo</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                Thao tác thành công!
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="app.js"></script>
</body>
</html>
